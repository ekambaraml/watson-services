cat << EOF | oc create -f -
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: worker
  name: 99-crio
spec:
  config:
    ignition:
      version: 2.2.0
    storage:
      files:
      - contents:
          source: data:text/plain;charset=utf-8;base64,IyBUaGUgQ1JJLU8gY29uZmlndXJhdGlvbiBmaWxlIHNwZWNpZmllcyBhbGwgb2YgdGhlIGF2YWlsYWJsZSBjb25maWd1cmF0aW9uCiMgb3B0aW9ucyBhbmQgY29tbWFuZC1saW5lIGZsYWdzIGZvciB0aGUgY3Jpbyg4KSBPQ0kgS3ViZXJuZXRlcyBDb250YWluZXIgUnVudGltZQojIGRhZW1vbiwgYnV0IGluIGEgVE9NTCBmb3JtYXQgdGhhdCBjYW4gYmUgbW9yZSBlYXNpbHkgbW9kaWZpZWQgYW5kIHZlcnNpb25lZC4KIwojIFBsZWFzZSByZWZlciB0byBjcmlvLmNvbmYoNSkgZm9yIGRldGFpbHMgb2YgYWxsIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy4KCiMgQ1JJLU8gc3VwcG9ydHMgcGFydGlhbCBjb25maWd1cmF0aW9uIHJlbG9hZCBkdXJpbmcgcnVudGltZSwgd2hpY2ggY2FuIGJlCiMgZG9uZSBieSBzZW5kaW5nIFNJR0hVUCB0byB0aGUgcnVubmluZyBwcm9jZXNzLiBDdXJyZW50bHkgc3VwcG9ydGVkIG9wdGlvbnMKIyBhcmUgZXhwbGljaXRseSBtZW50aW9uZWQgd2l0aDogJ1RoaXMgb3B0aW9uIHN1cHBvcnRzIGxpdmUgY29uZmlndXJhdGlvbgojIHJlbG9hZCcuCgojIENSSS1PIHJlYWRzIGl0cyBzdG9yYWdlIGRlZmF1bHRzIGZyb20gdGhlIGNvbnRhaW5lcnMtc3RvcmFnZS5jb25mKDUpIGZpbGUKIyBsb2NhdGVkIGF0IC9ldGMvY29udGFpbmVycy9zdG9yYWdlLmNvbmYuIE1vZGlmeSB0aGlzIHN0b3JhZ2UgY29uZmlndXJhdGlvbiBpZgojIHlvdSB3YW50IHRvIGNoYW5nZSB0aGUgc3lzdGVtJ3MgZGVmYXVsdHMuIElmIHlvdSB3YW50IHRvIG1vZGlmeSBzdG9yYWdlIGp1c3QKIyBmb3IgQ1JJLU8sIHlvdSBjYW4gY2hhbmdlIHRoZSBzdG9yYWdlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBoZXJlLgpbY3Jpb10KCiMgUGF0aCB0byB0aGUgInJvb3QgZGlyZWN0b3J5Ii4gQ1JJLU8gc3RvcmVzIGFsbCBvZiBpdHMgZGF0YSwgaW5jbHVkaW5nCiMgY29udGFpbmVycyBpbWFnZXMsIGluIHRoaXMgZGlyZWN0b3J5Lgojcm9vdCA9ICIvdmFyL2xpYi9jb250YWluZXJzL3N0b3JhZ2UiCgojIFBhdGggdG8gdGhlICJydW4gZGlyZWN0b3J5Ii4gQ1JJLU8gc3RvcmVzIGFsbCBvZiBpdHMgc3RhdGUgaW4gdGhpcyBkaXJlY3RvcnkuCiNydW5yb290ID0gIi9ydW4vdXNlci8xMDAwIgoKIyBTdG9yYWdlIGRyaXZlciB1c2VkIHRvIG1hbmFnZSB0aGUgc3RvcmFnZSBvZiBpbWFnZXMgYW5kIGNvbnRhaW5lcnMuIFBsZWFzZQojIHJlZmVyIHRvIGNvbnRhaW5lcnMtc3RvcmFnZS5jb25mKDUpIHRvIHNlZSBhbGwgYXZhaWxhYmxlIHN0b3JhZ2UgZHJpdmVycy4KI3N0b3JhZ2VfZHJpdmVyID0gIm92ZXJsYXkiCgojIExpc3QgdG8gcGFzcyBvcHRpb25zIHRvIHRoZSBzdG9yYWdlIGRyaXZlci4gUGxlYXNlIHJlZmVyIHRvCiMgY29udGFpbmVycy1zdG9yYWdlLmNvbmYoNSkgdG8gc2VlIGFsbCBhdmFpbGFibGUgc3RvcmFnZSBvcHRpb25zLgojc3RvcmFnZV9vcHRpb24gPSBbCiNdCgojIFRoZSBkZWZhdWx0IGxvZyBkaXJlY3Rvcnkgd2hlcmUgYWxsIGxvZ3Mgd2lsbCBnbyB1bmxlc3MgZGlyZWN0bHkgc3BlY2lmaWVkIGJ5CiMgdGhlIGt1YmVsZXQuIFRoZSBsb2cgZGlyZWN0b3J5IHNwZWNpZmllZCBtdXN0IGJlIGFuIGFic29sdXRlIGRpcmVjdG9yeS4KIyBsb2dfZGlyID0gIi92YXIvbG9nL2NyaW8vcG9kcyIKCiMgTG9jYXRpb24gZm9yIENSSS1PIHRvIGxheSBkb3duIHRoZSB2ZXJzaW9uIGZpbGUKIyB2ZXJzaW9uX2ZpbGUgPSAiL3Zhci9saWIvY3Jpby92ZXJzaW9uIgoKIyBUaGUgY3Jpby5hcGkgdGFibGUgY29udGFpbnMgc2V0dGluZ3MgZm9yIHRoZSBrdWJlbGV0L2dSUEMgaW50ZXJmYWNlLgpbY3Jpby5hcGldCgojIFBhdGggdG8gQUZfTE9DQUwgc29ja2V0IG9uIHdoaWNoIENSSS1PIHdpbGwgbGlzdGVuLgojIGxpc3RlbiA9ICIvdmFyL3J1bi9jcmlvL2NyaW8uc29jayIKCiMgSG9zdCBJUCBjb25zaWRlcmVkIGFzIHRoZSBwcmltYXJ5IElQIHRvIHVzZSBieSBDUkktTyBmb3IgdGhpbmdzIHN1Y2ggYXMgaG9zdCBuZXR3b3JrIElQLgojIGhvc3RfaXAgPSAiIgoKIyBJUCBhZGRyZXNzIG9uIHdoaWNoIHRoZSBzdHJlYW0gc2VydmVyIHdpbGwgbGlzdGVuLgpzdHJlYW1fYWRkcmVzcyA9ICIiCgojIFRoZSBwb3J0IG9uIHdoaWNoIHRoZSBzdHJlYW0gc2VydmVyIHdpbGwgbGlzdGVuLgpzdHJlYW1fcG9ydCA9ICIxMDAxMCIKCiMgRW5hYmxlIGVuY3J5cHRlZCBUTFMgdHJhbnNwb3J0IG9mIHRoZSBzdHJlYW0gc2VydmVyLgojIHN0cmVhbV9lbmFibGVfdGxzID0gZmFsc2UKCiMgUGF0aCB0byB0aGUgeDUwOSBjZXJ0aWZpY2F0ZSBmaWxlIHVzZWQgdG8gc2VydmUgdGhlIGVuY3J5cHRlZCBzdHJlYW0uIFRoaXMKIyBmaWxlIGNhbiBjaGFuZ2UsIGFuZCBDUkktTyB3aWxsIGF1dG9tYXRpY2FsbHkgcGljayB1cCB0aGUgY2hhbmdlcyB3aXRoaW4gNQojIG1pbnV0ZXMuCiMgc3RyZWFtX3Rsc19jZXJ0ID0gIiIKCiMgUGF0aCB0byB0aGUga2V5IGZpbGUgdXNlZCB0byBzZXJ2ZSB0aGUgZW5jcnlwdGVkIHN0cmVhbS4gVGhpcyBmaWxlIGNhbgojIGNoYW5nZSBhbmQgQ1JJLU8gd2lsbCBhdXRvbWF0aWNhbGx5IHBpY2sgdXAgdGhlIGNoYW5nZXMgd2l0aGluIDUgbWludXRlcy4KIyBzdHJlYW1fdGxzX2tleSA9ICIiCgojIFBhdGggdG8gdGhlIHg1MDkgQ0EocykgZmlsZSB1c2VkIHRvIHZlcmlmeSBhbmQgYXV0aGVudGljYXRlIGNsaWVudAojIGNvbW11bmljYXRpb24gd2l0aCB0aGUgZW5jcnlwdGVkIHN0cmVhbS4gVGhpcyBmaWxlIGNhbiBjaGFuZ2UgYW5kIENSSS1PIHdpbGwKIyBhdXRvbWF0aWNhbGx5IHBpY2sgdXAgdGhlIGNoYW5nZXMgd2l0aGluIDUgbWludXRlcy4KIyBzdHJlYW1fdGxzX2NhID0gIiIKCiMgTWF4aW11bSBncnBjIHNlbmQgbWVzc2FnZSBzaXplIGluIGJ5dGVzLiBJZiBub3Qgc2V0IG9yIDw9MCwgdGhlbiBDUkktTyB3aWxsIGRlZmF1bHQgdG8gMTYgKiAxMDI0ICogMTAyNC4KIyBncnBjX21heF9zZW5kX21zZ19zaXplID0gMTY3NzcyMTYKCiMgTWF4aW11bSBncnBjIHJlY2VpdmUgbWVzc2FnZSBzaXplLiBJZiBub3Qgc2V0IG9yIDw9IDAsIHRoZW4gQ1JJLU8gd2lsbCBkZWZhdWx0IHRvIDE2ICogMTAyNCAqIDEwMjQuCiMgZ3JwY19tYXhfcmVjdl9tc2dfc2l6ZSA9IDE2Nzc3MjE2CgojIFRoZSBjcmlvLnJ1bnRpbWUgdGFibGUgY29udGFpbnMgc2V0dGluZ3MgcGVydGFpbmluZyB0byB0aGUgT0NJIHJ1bnRpbWUgdXNlZAojIGFuZCBvcHRpb25zIGZvciBob3cgdG8gc2V0IHVwIGFuZCBtYW5hZ2UgdGhlIE9DSSBydW50aW1lLgpbY3Jpby5ydW50aW1lXQoKIyBBIGxpc3Qgb2YgdWxpbWl0cyB0byBiZSBzZXQgaW4gY29udGFpbmVycyBieSBkZWZhdWx0LCBzcGVjaWZpZWQgYXMKIyAiPHVsaW1pdCBuYW1lPj08c29mdCBsaW1pdD46PGhhcmQgbGltaXQ+IiwgZm9yIGV4YW1wbGU6CiMgIm5vZmlsZT0xMDI0OjIwNDgiCiMgSWYgbm90aGluZyBpcyBzZXQgaGVyZSwgc2V0dGluZ3Mgd2lsbCBiZSBpbmhlcml0ZWQgZnJvbSB0aGUgQ1JJLU8gZGFlbW9uCiNkZWZhdWx0X3VsaW1pdHMgPSBbCiNdCgojIGRlZmF1bHRfcnVudGltZSBpcyB0aGUgX25hbWVfIG9mIHRoZSBPQ0kgcnVudGltZSB0byBiZSB1c2VkIGFzIHRoZSBkZWZhdWx0LgojIFRoZSBuYW1lIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgcnVudGltZXMgbWFwIGJlbG93LgojIGRlZmF1bHRfcnVudGltZSA9ICJydW5jIgoKIyBJZiB0cnVlLCB0aGUgcnVudGltZSB3aWxsIG5vdCB1c2UgcGl2b3Rfcm9vdCwgYnV0IGluc3RlYWQgdXNlIE1TX01PVkUuCiMgbm9fcGl2b3QgPSBmYWxzZQoKIyBQYXRoIHRvIHRoZSBjb25tb24gYmluYXJ5LCB1c2VkIGZvciBtb25pdG9yaW5nIHRoZSBPQ0kgcnVudGltZS4KIyBXaWxsIGJlIHNlYXJjaGVkIGZvciB1c2luZyAvVXNlcnMvYmRhdmlkc29uL2JpbjovdXNyL2xvY2FsL29wdC9weXRob24vbGliZXhlYy9iaW46L3Vzci9sb2NhbC9vcHQvdGVycmFmb3JtQDAuMTEvYmluOi91c3IvbG9jYWwvb3B0L25vZGVAOC9iaW46L3Vzci9sb2NhbC9vcHQvY3VybC9iaW46L1VzZXJzL2JkYXZpZHNvbi9wZXJsNS9iaW46L3Vzci9sb2NhbC9iaW46L3Vzci9iaW46L2JpbjovdXNyL3NiaW46L3NiaW46L0xpYnJhcnkvQXBwbGUvdXNyL2JpbjovVXNlcnMvYmRhdmlkc29uL2JpbjovdXNyL2xvY2FsL29wdC9weXRob24vbGliZXhlYy9iaW46L3Vzci9sb2NhbC9vcHQvdGVycmFmb3JtQDAuMTEvYmluOi91c3IvbG9jYWwvb3B0L25vZGVAOC9iaW46L3Vzci9sb2NhbC9vcHQvY3VybC9iaW46L1VzZXJzL2JkYXZpZHNvbi9wZXJsNS9iaW46L3Vzci9sb2NhbC9nby9iaW46L1VzZXJzL2JkYXZpZHNvbi9nby9iaW46L29wdC9ncm9vdnkvYmluOi9vcHQvbWF2ZW4vYmluOi9BcHBsaWNhdGlvbnMvVk13YXJlIE9WRiBUb29sOi9Vc2Vycy9iZGF2aWRzb24vLmZhYnJpYzgvYmluOi9Vc2Vycy9iZGF2aWRzb24vaXN0aW8tMC4xLjYvYmluOi91c3IvbG9jYWwvZ28vYmluOi9Vc2Vycy9iZGF2aWRzb24vZ28vYmluOi9vcHQvZ3Jvb3Z5L2Jpbjovb3B0L21hdmVuL2JpbjovQXBwbGljYXRpb25zL1ZNd2FyZSBPVkYgVG9vbDovVXNlcnMvYmRhdmlkc29uLy5mYWJyaWM4L2JpbjovVXNlcnMvYmRhdmlkc29uL2lzdGlvLTAuMS42L2JpbiBpZiBlbXB0eS4KY29ubW9uID0gIi91c3IvbGliZXhlYy9jcmlvL2Nvbm1vbiIKCiMgQ2dyb3VwIHNldHRpbmcgZm9yIGNvbm1vbgpjb25tb25fY2dyb3VwID0gInBvZCIKCiMgRW52aXJvbm1lbnQgdmFyaWFibGUgbGlzdCBmb3IgdGhlIGNvbm1vbiBwcm9jZXNzLCB1c2VkIGZvciBwYXNzaW5nIG5lY2Vzc2FyeQojIGVudmlyb25tZW50IHZhcmlhYmxlcyB0byBjb25tb24gb3IgdGhlIHJ1bnRpbWUuCiMgY29ubW9uX2VudiA9IFsKIyAJIlBBVEg9L3Vzci9sb2NhbC9zYmluOi91c3IvbG9jYWwvYmluOi91c3Ivc2JpbjovdXNyL2Jpbjovc2JpbjovYmluIiwKIyBdCgojIElmIHRydWUsIFNFTGludXggd2lsbCBiZSB1c2VkIGZvciBwb2Qgc2VwYXJhdGlvbiBvbiB0aGUgaG9zdC4KIyBzZWxpbnV4ID0gdHJ1ZQoKIyBQYXRoIHRvIHRoZSBzZWNjb21wLmpzb24gcHJvZmlsZSB3aGljaCBpcyB1c2VkIGFzIHRoZSBkZWZhdWx0IHNlY2NvbXAgcHJvZmlsZQojIGZvciB0aGUgcnVudGltZS4gSWYgbm90IHNwZWNpZmllZCwgdGhlbiB0aGUgaW50ZXJuYWwgZGVmYXVsdCBzZWNjb21wIHByb2ZpbGUKIyB3aWxsIGJlIHVzZWQuCiMgc2VjY29tcF9wcm9maWxlID0gIi9ldGMvY3Jpby9zZWNjb21wLmpzb24iCgojIFVzZWQgdG8gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBkZWZhdWx0IEFwcEFybW9yIHByb2ZpbGUgb2YgQ1JJLU8uIFRoZSBkZWZhdWx0CiMgcHJvZmlsZSBuYW1lIGlzICJjcmlvLWRlZmF1bHQtIiBmb2xsb3dlZCBieSB0aGUgdmVyc2lvbiBzdHJpbmcgb2YgQ1JJLU8uCmFwcGFybW9yX3Byb2ZpbGUgPSAiY3Jpby1kZWZhdWx0IgoKIyBDZ3JvdXAgbWFuYWdlbWVudCBpbXBsZW1lbnRhdGlvbiB1c2VkIGZvciB0aGUgcnVudGltZS4KY2dyb3VwX21hbmFnZXIgPSAic3lzdGVtZCIKCiMgTGlzdCBvZiBkZWZhdWx0IGNhcGFiaWxpdGllcyBmb3IgY29udGFpbmVycy4gSWYgaXQgaXMgZW1wdHkgb3IgY29tbWVudGVkIG91dCwKIyBvbmx5IHRoZSBjYXBhYmlsaXRpZXMgZGVmaW5lZCBpbiB0aGUgY29udGFpbmVycyBqc29uIGZpbGUgYnkgdGhlIHVzZXIva3ViZQojIHdpbGwgYmUgYWRkZWQuCiMgZGVmYXVsdF9jYXBhYmlsaXRpZXMgPSBbCiMgCSJDSE9XTiIsCiMgCSJEQUNfT1ZFUlJJREUiLAojIAkiRlNFVElEIiwKIyAJIkZPV05FUiIsCiMgCSJORVRfUkFXIiwKIyAJIlNFVEdJRCIsCiMgCSJTRVRVSUQiLAojIAkiU0VUUENBUCIsCiMgCSJORVRfQklORF9TRVJWSUNFIiwKIyAJIlNZU19DSFJPT1QiLAojIAkiS0lMTCIsCiMgXQoKIyBMaXN0IG9mIGRlZmF1bHQgc3lzY3Rscy4gSWYgaXQgaXMgZW1wdHkgb3IgY29tbWVudGVkIG91dCwgb25seSB0aGUgc3lzY3RscwojIGRlZmluZWQgaW4gdGhlIGNvbnRhaW5lciBqc29uIGZpbGUgYnkgdGhlIHVzZXIva3ViZSB3aWxsIGJlIGFkZGVkLgojIGRlZmF1bHRfc3lzY3RscyA9IFsKIyBdCgojIExpc3Qgb2YgYWRkaXRpb25hbCBkZXZpY2VzLiBzcGVjaWZpZWQgYXMKIyAiPGRldmljZS1vbi1ob3N0Pjo8ZGV2aWNlLW9uLWNvbnRhaW5lcj46PHBlcm1pc3Npb25zPiIsIGZvciBleGFtcGxlOiAiLS1kZXZpY2U9L2Rldi9zZGM6L2Rldi94dmRjOnJ3bSIuCiNJZiBpdCBpcyBlbXB0eSBvciBjb21tZW50ZWQgb3V0LCBvbmx5IHRoZSBkZXZpY2VzCiMgZGVmaW5lZCBpbiB0aGUgY29udGFpbmVyIGpzb24gZmlsZSBieSB0aGUgdXNlci9rdWJlIHdpbGwgYmUgYWRkZWQuCiMgYWRkaXRpb25hbF9kZXZpY2VzID0gWwojIF0KCiMgUGF0aCB0byBPQ0kgaG9va3MgZGlyZWN0b3JpZXMgZm9yIGF1dG9tYXRpY2FsbHkgZXhlY3V0ZWQgaG9va3MuCiMgTm90ZTogdGhlIGRlZmF1bHQgaXMganVzdCAvdXNyL3NoYXJlL2NvbnRhaW5lcnMvb2NpL2hvb2tzLmQsIGJ1dCAvdXNyIGlzIGltbXV0YWJsZSBpbiBSSENPUwojIHNvIHdlIGFkZCAvZXRjL2NvbnRhaW5lcnMvb2NpL2hvb2tzLmQgYXMgd2VsbApob29rc19kaXIgPSBbCiAgICAiL2V0Yy9jb250YWluZXJzL29jaS9ob29rcy5kIiwKXQoKIyBMaXN0IG9mIGRlZmF1bHQgbW91bnRzIGZvciBlYWNoIGNvbnRhaW5lci4gKipEZXByZWNhdGVkOioqIHRoaXMgb3B0aW9uIHdpbGwKIyBiZSByZW1vdmVkIGluIGZ1dHVyZSB2ZXJzaW9ucyBpbiBmYXZvciBvZiBkZWZhdWx0X21vdW50c19maWxlLgojIGRlZmF1bHRfbW91bnRzID0gWwojIAkiL3Vzci9zaGFyZS9yaGVsL3NlY3JldHM6L3J1bi9zZWNyZXRzIiwKIyBdCgojIFBhdGggdG8gdGhlIGZpbGUgc3BlY2lmeWluZyB0aGUgZGVmYXVsdHMgbW91bnRzIGZvciBlYWNoIGNvbnRhaW5lci4gVGhlCiMgZm9ybWF0IG9mIHRoZSBjb25maWcgaXMgL1NSQzovRFNULCBvbmUgbW91bnQgcGVyIGxpbmUuIE5vdGljZSB0aGF0IENSSS1PIHJlYWRzCiMgaXRzIGRlZmF1bHQgbW91bnRzIGZyb20gdGhlIGZvbGxvd2luZyB0d28gZmlsZXM6CiMKIyAgIDEpIC9ldGMvY29udGFpbmVycy9tb3VudHMuY29uZiAoaS5lLiwgZGVmYXVsdF9tb3VudHNfZmlsZSk6IFRoaXMgaXMgdGhlCiMgICAgICBvdmVycmlkZSBmaWxlLCB3aGVyZSB1c2VycyBjYW4gZWl0aGVyIGFkZCBpbiB0aGVpciBvd24gZGVmYXVsdCBtb3VudHMsIG9yCiMgICAgICBvdmVycmlkZSB0aGUgZGVmYXVsdCBtb3VudHMgc2hpcHBlZCB3aXRoIHRoZSBwYWNrYWdlLgojCiMgICAyKSAvdXNyL3NoYXJlL2NvbnRhaW5lcnMvbW91bnRzLmNvbmY6IFRoaXMgaXMgdGhlIGRlZmF1bHQgZmlsZSByZWFkIGZvcgojICAgICAgbW91bnRzLiBJZiB5b3Ugd2FudCBDUkktTyB0byByZWFkIGZyb20gYSBkaWZmZXJlbnQsIHNwZWNpZmljIG1vdW50cyBmaWxlLAojICAgICAgeW91IGNhbiBjaGFuZ2UgdGhlIGRlZmF1bHRfbW91bnRzX2ZpbGUuIE5vdGUsIGlmIHRoaXMgaXMgZG9uZSwgQ1JJLU8gd2lsbAojICAgICAgb25seSBhZGQgbW91bnRzIGl0IGZpbmRzIGluIHRoaXMgZmlsZS4KIwojZGVmYXVsdF9tb3VudHNfZmlsZSA9ICIiCgojIE1heGltdW0gbnVtYmVyIG9mIHByb2Nlc3NlcyBhbGxvd2VkIGluIGEgY29udGFpbmVyLgpwaWRzX2xpbWl0ID0gODE5MgoKIyBNYXhpbXVtIHNpemVkIGFsbG93ZWQgZm9yIHRoZSBjb250YWluZXIgbG9nIGZpbGUuIE5lZ2F0aXZlIG51bWJlcnMgaW5kaWNhdGUKIyB0aGF0IG5vIHNpemUgbGltaXQgaXMgaW1wb3NlZC4gSWYgaXQgaXMgcG9zaXRpdmUsIGl0IG11c3QgYmUgPj0gODE5MiB0bwojIG1hdGNoL2V4Y2VlZCBjb25tb24ncyByZWFkIGJ1ZmZlci4gVGhlIGZpbGUgaXMgdHJ1bmNhdGVkIGFuZCByZS1vcGVuZWQgc28gdGhlCiMgbGltaXQgaXMgbmV2ZXIgZXhjZWVkZWQuCiMgbG9nX3NpemVfbWF4ID0gLTEKCiMgV2hldGhlciBjb250YWluZXIgb3V0cHV0IHNob3VsZCBiZSBsb2dnZWQgdG8gam91cm5hbGQgaW4gYWRkaXRpb24gdG8gdGhlIGt1YmVyZW50ZXMgbG9nIGZpbGUKIyBsb2dfdG9fam91cm5hbGQgPSBmYWxzZQoKIyBQYXRoIHRvIGRpcmVjdG9yeSBpbiB3aGljaCBjb250YWluZXIgZXhpdCBmaWxlcyBhcmUgd3JpdHRlbiB0byBieSBjb25tb24uCiMgY29udGFpbmVyX2V4aXRzX2RpciA9ICIvdmFyL3J1bi9jcmlvL2V4aXRzIgoKIyBQYXRoIHRvIGRpcmVjdG9yeSBmb3IgY29udGFpbmVyIGF0dGFjaCBzb2NrZXRzLgojIGNvbnRhaW5lcl9hdHRhY2hfc29ja2V0X2RpciA9ICIvdmFyL3J1bi9jcmlvIgoKIyBUaGUgcHJlZml4IHRvIHVzZSBmb3IgdGhlIHNvdXJjZSBvZiB0aGUgYmluZCBtb3VudHMuCiMgYmluZF9tb3VudF9wcmVmaXggPSAiIgoKIyBJZiBzZXQgdG8gdHJ1ZSwgYWxsIGNvbnRhaW5lcnMgd2lsbCBydW4gaW4gcmVhZC1vbmx5IG1vZGUuCiMgcmVhZF9vbmx5ID0gZmFsc2UKCiMgQ2hhbmdlcyB0aGUgdmVyYm9zaXR5IG9mIHRoZSBsb2dzIGJhc2VkIG9uIHRoZSBsZXZlbCBpdCBpcyBzZXQgdG8uIE9wdGlvbnMKIyBhcmUgZmF0YWwsIHBhbmljLCBlcnJvciwgd2FybiwgaW5mbywgYW5kIGRlYnVnLiBUaGlzIG9wdGlvbiBzdXBwb3J0cyBsaXZlCiMgY29uZmlndXJhdGlvbiByZWxvYWQuCiMgbG9nX2xldmVsID0gImVycm9yIgoKIyBUaGUgVUlEIG1hcHBpbmdzIGZvciB0aGUgdXNlciBuYW1lc3BhY2Ugb2YgZWFjaCBjb250YWluZXIuIEEgcmFuZ2UgaXMKIyBzcGVjaWZpZWQgaW4gdGhlIGZvcm0gY29udGFpbmVyVUlEOkhvc3RVSUQ6U2l6ZS4gTXVsdGlwbGUgcmFuZ2VzIG11c3QgYmUKIyBzZXBhcmF0ZWQgYnkgY29tbWEuCiMgdWlkX21hcHBpbmdzID0gIiIKCiMgVGhlIEdJRCBtYXBwaW5ncyBmb3IgdGhlIHVzZXIgbmFtZXNwYWNlIG9mIGVhY2ggY29udGFpbmVyLiBBIHJhbmdlIGlzCiMgc3BlY2lmaWVkIGluIHRoZSBmb3JtIGNvbnRhaW5lckdJRDpIb3N0R0lEOlNpemUuIE11bHRpcGxlIHJhbmdlcyBtdXN0IGJlCiMgc2VwYXJhdGVkIGJ5IGNvbW1hLgojIGdpZF9tYXBwaW5ncyA9ICIiCgojIFRoZSBtaW5pbWFsIGFtb3VudCBvZiB0aW1lIGluIHNlY29uZHMgdG8gd2FpdCBiZWZvcmUgaXNzdWluZyBhIHRpbWVvdXQKIyByZWdhcmRpbmcgdGhlIHByb3BlciB0ZXJtaW5hdGlvbiBvZiB0aGUgY29udGFpbmVyLgojIGN0cl9zdG9wX3RpbWVvdXQgPSAwCgojIE1hbmFnZU5ldHdvcmtOU0xpZmVjeWNsZSBkZXRlcm1pbmVzIHdoZXRoZXIgd2UgcGluIGFuZCByZW1vdmUgbmV0d29yayBuYW1lc3BhY2UKIyBhbmQgbWFuYWdlIGl0cyBsaWZlY3ljbGUuCiMgbWFuYWdlX25ldHdvcmtfbnNfbGlmZWN5Y2xlID0gZmFsc2UKCiMgVGhlICJjcmlvLnJ1bnRpbWUucnVudGltZXMiIHRhYmxlIGRlZmluZXMgYSBsaXN0IG9mIE9DSSBjb21wYXRpYmxlIHJ1bnRpbWVzLgojIFRoZSBydW50aW1lIHRvIHVzZSBpcyBwaWNrZWQgYmFzZWQgb24gdGhlIHJ1bnRpbWVfaGFuZGxlciBwcm92aWRlZCBieSB0aGUgQ1JJLgojIElmIG5vIHJ1bnRpbWVfaGFuZGxlciBpcyBwcm92aWRlZCwgdGhlIHJ1bnRpbWUgd2lsbCBiZSBwaWNrZWQgYmFzZWQgb24gdGhlIGxldmVsCiMgb2YgdHJ1c3Qgb2YgdGhlIHdvcmtsb2FkLiBFYWNoIGVudHJ5IGluIHRoZSB0YWJsZSBzaG91bGQgZm9sbG93IHRoZSBmb3JtYXQ6CiMKI1tjcmlvLnJ1bnRpbWUucnVudGltZXMucnVudGltZS1oYW5kbGVyXQojICBydW50aW1lX3BhdGggPSAiL3BhdGgvdG8vdGhlL2V4ZWN1dGFibGUiCiMgIHJ1bnRpbWVfdHlwZSA9ICJvY2kiCiMgIHJ1bnRpbWVfcm9vdCA9ICIvcGF0aC90by90aGUvcm9vdCIKIwojIFdoZXJlOgojIC0gcnVudGltZS1oYW5kbGVyOiBuYW1lIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHJ1bnRpbWUKIyAtIHJ1bnRpbWVfcGF0aCAob3B0aW9uYWwsIHN0cmluZyk6IGFic29sdXRlIHBhdGggdG8gdGhlIHJ1bnRpbWUgZXhlY3V0YWJsZSBpbgojICAgdGhlIGhvc3QgZmlsZXN5c3RlbS4gSWYgb21pdHRlZCwgdGhlIHJ1bnRpbWUtaGFuZGxlciBpZGVudGlmaWVyIHNob3VsZCBtYXRjaAojICAgdGhlIHJ1bnRpbWUgZXhlY3V0YWJsZSBuYW1lLCBhbmQgdGhlIHJ1bnRpbWUgZXhlY3V0YWJsZSBzaG91bGQgYmUgcGxhY2VkCiMgICBpbiAvVXNlcnMvYmRhdmlkc29uL2JpbjovdXNyL2xvY2FsL29wdC9weXRob24vbGliZXhlYy9iaW46L3Vzci9sb2NhbC9vcHQvdGVycmFmb3JtQDAuMTEvYmluOi91c3IvbG9jYWwvb3B0L25vZGVAOC9iaW46L3Vzci9sb2NhbC9vcHQvY3VybC9iaW46L1VzZXJzL2JkYXZpZHNvbi9wZXJsNS9iaW46L3Vzci9sb2NhbC9iaW46L3Vzci9iaW46L2JpbjovdXNyL3NiaW46L3NiaW46L0xpYnJhcnkvQXBwbGUvdXNyL2JpbjovVXNlcnMvYmRhdmlkc29uL2JpbjovdXNyL2xvY2FsL29wdC9weXRob24vbGliZXhlYy9iaW46L3Vzci9sb2NhbC9vcHQvdGVycmFmb3JtQDAuMTEvYmluOi91c3IvbG9jYWwvb3B0L25vZGVAOC9iaW46L3Vzci9sb2NhbC9vcHQvY3VybC9iaW46L1VzZXJzL2JkYXZpZHNvbi9wZXJsNS9iaW46L3Vzci9sb2NhbC9nby9iaW46L1VzZXJzL2JkYXZpZHNvbi9nby9iaW46L29wdC9ncm9vdnkvYmluOi9vcHQvbWF2ZW4vYmluOi9BcHBsaWNhdGlvbnMvVk13YXJlIE9WRiBUb29sOi9Vc2Vycy9iZGF2aWRzb24vLmZhYnJpYzgvYmluOi9Vc2Vycy9iZGF2aWRzb24vaXN0aW8tMC4xLjYvYmluOi91c3IvbG9jYWwvZ28vYmluOi9Vc2Vycy9iZGF2aWRzb24vZ28vYmluOi9vcHQvZ3Jvb3Z5L2Jpbjovb3B0L21hdmVuL2JpbjovQXBwbGljYXRpb25zL1ZNd2FyZSBPVkYgVG9vbDovVXNlcnMvYmRhdmlkc29uLy5mYWJyaWM4L2JpbjovVXNlcnMvYmRhdmlkc29uL2lzdGlvLTAuMS42L2Jpbi4KIyAtIHJ1bnRpbWVfdHlwZSAob3B0aW9uYWwsIHN0cmluZyk6IHR5cGUgb2YgcnVudGltZSwgb25lIG9mOiAib2NpIiwgInZtIi4gSWYKIyAgIG9taXR0ZWQsIGFuICJvY2kiIHJ1bnRpbWUgaXMgYXNzdW1lZC4KIyAtIHJ1bnRpbWVfcm9vdCAob3B0aW9uYWwsIHN0cmluZyk6IHJvb3QgZGlyZWN0b3J5IGZvciBzdG9yYWdlIG9mIGNvbnRhaW5lcnMKIyAgIHN0YXRlLgoKCiMgW2NyaW8ucnVudGltZS5ydW50aW1lcy5ydW5jXQojIHJ1bnRpbWVfcGF0aCA9ICIiCiMgcnVudGltZV90eXBlID0gIm9jaSIKIyBydW50aW1lX3Jvb3QgPSAiL3J1bi9ydW5jIgoKCiMgS2F0YSBDb250YWluZXJzIGlzIGFuIE9DSSBydW50aW1lLCB3aGVyZSBjb250YWluZXJzIGFyZSBydW4gaW5zaWRlIGxpZ2h0d2VpZ2h0CiMgVk1zLiBLYXRhIHByb3ZpZGVzIGFkZGl0aW9uYWwgaXNvbGF0aW9uIHRvd2FyZHMgdGhlIGhvc3QsIG1pbmltaXppbmcgdGhlIGhvc3QgYXR0YWNrCiMgc3VyZmFjZSBhbmQgbWl0aWdhdGluZyB0aGUgY29uc2VxdWVuY2VzIG9mIGNvbnRhaW5lcnMgYnJlYWtvdXQuCgojIEthdGEgQ29udGFpbmVycyB3aXRoIHRoZSBkZWZhdWx0IGNvbmZpZ3VyZWQgVk1NCiNbY3Jpby5ydW50aW1lLnJ1bnRpbWVzLmthdGEtcnVudGltZV0KCiMgS2F0YSBDb250YWluZXJzIHdpdGggdGhlIFFFTVUgVk1NCiNbY3Jpby5ydW50aW1lLnJ1bnRpbWVzLmthdGEtcWVtdV0KCiMgS2F0YSBDb250YWluZXJzIHdpdGggdGhlIEZpcmVjcmFja2VyIFZNTQojW2NyaW8ucnVudGltZS5ydW50aW1lcy5rYXRhLWZjXQoKIyBUaGUgY3Jpby5pbWFnZSB0YWJsZSBjb250YWlucyBzZXR0aW5ncyBwZXJ0YWluaW5nIHRvIHRoZSBtYW5hZ2VtZW50IG9mIE9DSSBpbWFnZXMuCiMKIyBDUkktTyByZWFkcyBpdHMgY29uZmlndXJlZCByZWdpc3RyaWVzIGRlZmF1bHRzIGZyb20gdGhlIHN5c3RlbSB3aWRlCiMgY29udGFpbmVycy1yZWdpc3RyaWVzLmNvbmYoNSkgbG9jYXRlZCBpbiAvZXRjL2NvbnRhaW5lcnMvcmVnaXN0cmllcy5jb25mLiBJZgojIHlvdSB3YW50IHRvIG1vZGlmeSBqdXN0IENSSS1PLCB5b3UgY2FuIGNoYW5nZSB0aGUgcmVnaXN0cmllcyBjb25maWd1cmF0aW9uIGluCiMgdGhpcyBmaWxlLiBPdGhlcndpc2UsIGxlYXZlIGluc2VjdXJlX3JlZ2lzdHJpZXMgYW5kIHJlZ2lzdHJpZXMgY29tbWVudGVkIG91dCB0bwojIHVzZSB0aGUgc3lzdGVtJ3MgZGVmYXVsdHMgZnJvbSAvZXRjL2NvbnRhaW5lcnMvcmVnaXN0cmllcy5jb25mLgpbY3Jpby5pbWFnZV0KCiMgRGVmYXVsdCB0cmFuc3BvcnQgZm9yIHB1bGxpbmcgaW1hZ2VzIGZyb20gYSByZW1vdGUgY29udGFpbmVyIHN0b3JhZ2UuCiMgZGVmYXVsdF90cmFuc3BvcnQgPSAiZG9ja2VyOi8vIgoKIyBUaGUgcGF0aCB0byBhIGZpbGUgY29udGFpbmluZyBjcmVkZW50aWFscyBuZWNlc3NhcnkgZm9yIHB1bGxpbmcgaW1hZ2VzIGZyb20KIyBzZWN1cmUgcmVnaXN0cmllcy4gVGhlIGZpbGUgaXMgc2ltaWxhciB0byB0aGF0IG9mIC92YXIvbGliL2t1YmVsZXQvY29uZmlnLmpzb24KZ2xvYmFsX2F1dGhfZmlsZSA9ICIvdmFyL2xpYi9rdWJlbGV0L2NvbmZpZy5qc29uIgoKIyBUaGUgaW1hZ2UgdXNlZCB0byBpbnN0YW50aWF0ZSBpbmZyYSBjb250YWluZXJzLgojIFRoaXMgb3B0aW9uIHN1cHBvcnRzIGxpdmUgY29uZmlndXJhdGlvbiByZWxvYWQuCnBhdXNlX2ltYWdlID0gInF1YXkuaW8vb3BlbnNoaWZ0LXJlbGVhc2UtZGV2L29jcC12NC4wLWFydC1kZXZAc2hhMjU2OjJkYzNiZGNiMmIwYmYxZDZjNmFlNzQ5YmUwMTYzZTZkN2NhODEzZWNmYmE1ZTVmNWQ4ODk3MGM3M2E5ZDEyYTkiCgojIFRoZSBwYXRoIHRvIGEgZmlsZSBjb250YWluaW5nIGNyZWRlbnRpYWxzIHNwZWNpZmljIGZvciBwdWxsaW5nIHRoZSBwYXVzZV9pbWFnZSBmcm9tCiMgYWJvdmUuIFRoZSBmaWxlIGlzIHNpbWlsYXIgdG8gdGhhdCBvZiAvdmFyL2xpYi9rdWJlbGV0L2NvbmZpZy5qc29uCiMgVGhpcyBvcHRpb24gc3VwcG9ydHMgbGl2ZSBjb25maWd1cmF0aW9uIHJlbG9hZC4KcGF1c2VfaW1hZ2VfYXV0aF9maWxlID0gIi92YXIvbGliL2t1YmVsZXQvY29uZmlnLmpzb24iCgojIFRoZSBjb21tYW5kIHRvIHJ1biB0byBoYXZlIGEgY29udGFpbmVyIHN0YXkgaW4gdGhlIHBhdXNlZCBzdGF0ZS4KIyBUaGlzIG9wdGlvbiBzdXBwb3J0cyBsaXZlIGNvbmZpZ3VyYXRpb24gcmVsb2FkLgpwYXVzZV9jb21tYW5kID0gIi91c3IvYmluL3BvZCIKCiMgUGF0aCB0byB0aGUgZmlsZSB3aGljaCBkZWNpZGVzIHdoYXQgc29ydCBvZiBwb2xpY3kgd2UgdXNlIHdoZW4gZGVjaWRpbmcKIyB3aGV0aGVyIG9yIG5vdCB0byB0cnVzdCBhbiBpbWFnZSB0aGF0IHdlJ3ZlIHB1bGxlZC4gSXQgaXMgbm90IHJlY29tbWVuZGVkIHRoYXQKIyB0aGlzIG9wdGlvbiBiZSB1c2VkLCBhcyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB1c2luZyB0aGUgc3lzdGVtLXdpZGUgZGVmYXVsdAojIHBvbGljeSAoaS5lLiwgL2V0Yy9jb250YWluZXJzL3BvbGljeS5qc29uKSBpcyBtb3N0IG9mdGVuIHByZWZlcnJlZC4gUGxlYXNlCiMgcmVmZXIgdG8gY29udGFpbmVycy1wb2xpY3kuanNvbig1KSBmb3IgbW9yZSBkZXRhaWxzLgojIHNpZ25hdHVyZV9wb2xpY3kgPSAiIgoKIyBMaXN0IG9mIHJlZ2lzdHJpZXMgdG8gc2tpcCBUTFMgdmVyaWZpY2F0aW9uIGZvciBwdWxsaW5nIGltYWdlcy4gUGxlYXNlCiMgY29uc2lkZXIgY29uZmlndXJpbmcgdGhlIHJlZ2lzdHJpZXMgdmlhIC9ldGMvY29udGFpbmVycy9yZWdpc3RyaWVzLmNvbmYgYmVmb3JlCiMgY2hhbmdpbmcgdGhlbSBoZXJlLgojaW5zZWN1cmVfcmVnaXN0cmllcyA9ICJbXSIKCiMgQ29udHJvbHMgaG93IGltYWdlIHZvbHVtZXMgYXJlIGhhbmRsZWQuIFRoZSB2YWxpZCB2YWx1ZXMgYXJlIG1rZGlyLCBiaW5kIGFuZAojIGlnbm9yZTsgdGhlIGxhdHRlciB3aWxsIGlnbm9yZSB2b2x1bWVzIGVudGlyZWx5LgojIGltYWdlX3ZvbHVtZXMgPSAibWtkaXIiCgojIExpc3Qgb2YgcmVnaXN0cmllcyB0byBiZSB1c2VkIHdoZW4gcHVsbGluZyBhbiB1bnF1YWxpZmllZCBpbWFnZSAoZS5nLiwKIyAiYWxwaW5lOmxhdGVzdCIpLiBCeSBkZWZhdWx0LCByZWdpc3RyaWVzIGlzIHNldCB0byAiZG9ja2VyLmlvIiBmb3IKIyBjb21wYXRpYmlsaXR5IHJlYXNvbnMuIERlcGVuZGluZyBvbiB5b3VyIHdvcmtsb2FkIGFuZCB1c2VjYXNlIHlvdSBtYXkgYWRkIG1vcmUKIyByZWdpc3RyaWVzIChlLmcuLCAicXVheS5pbyIsICJyZWdpc3RyeS5mZWRvcmFwcm9qZWN0Lm9yZyIsCiMgInJlZ2lzdHJ5Lm9wZW5zdXNlLm9yZyIsIGV0Yy4pLgojcmVnaXN0cmllcyA9IFsKIyBdCgoKIyBUaGUgY3Jpby5uZXR3b3JrIHRhYmxlIGNvbnRhaW5lcnMgc2V0dGluZ3MgcGVydGFpbmluZyB0byB0aGUgbWFuYWdlbWVudCBvZgojIENOSSBwbHVnaW5zLgpbY3Jpby5uZXR3b3JrXQoKIyBQYXRoIHRvIHRoZSBkaXJlY3Rvcnkgd2hlcmUgQ05JIGNvbmZpZ3VyYXRpb24gZmlsZXMgYXJlIGxvY2F0ZWQuCiMgTm90ZSB0aGlzIGRlZmF1bHQgaXMgY2hhbmdlZCBmcm9tIHRoZSBSUE0uCm5ldHdvcmtfZGlyID0gIi9ldGMva3ViZXJuZXRlcy9jbmkvbmV0LmQvIgoKIyBQYXRocyB0byBkaXJlY3RvcmllcyB3aGVyZSBDTkkgcGx1Z2luIGJpbmFyaWVzIGFyZSBsb2NhdGVkLgojIE5vdGUgdGhpcyBkZWZhdWx0IGlzIGNoYW5nZWQgZnJvbSB0aGUgUlBNLgpwbHVnaW5fZGlycyA9IFsKICAgICIvdmFyL2xpYi9jbmkvYmluIiwKXQoKIyBBIG5lY2Vzc2FyeSBjb25maWd1cmF0aW9uIGZvciBQcm9tZXRoZXVzIGJhc2VkIG1ldHJpY3MgcmV0cmlldmFsCltjcmlvLm1ldHJpY3NdCgojIEdsb2JhbGx5IGVuYWJsZSBvciBkaXNhYmxlIG1ldHJpY3Mgc3VwcG9ydC4KZW5hYmxlX21ldHJpY3MgPSB0cnVlCgojIFRoZSBwb3J0IG9uIHdoaWNoIHRoZSBtZXRyaWNzIHNlcnZlciB3aWxsIGxpc3Rlbi4KbWV0cmljc19wb3J0ID0gOTUzNwo=
        filesystem: root
        mode: 0644
        path: /etc/crio/crio.conf
EOF


cat << EOF | oc create -f -
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: worker
  name: 99-sysctl-elastic
spec:
  config:
    ignition:
      version: 2.2.0
    storage:
      files:
      - contents:
          # vm.max_map_count=262144
          source: data:text/plain;charset=utf-8;base64,dm0ubWF4X21hcF9jb3VudD0yNjIxNDQ=
        filesystem: root
        mode: 0644
        path: /etc/sysctl.d/99-elasticsearch.conf
EOF

sleep 10
oc wait mcp/worker --for condition=updated --timeout=25m